<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Encuesta para Noor</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ffd6a5, #ffadad, #caffbf);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .card {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      width: 600px;
      text-align: center;
    }
    h1, h2 {
      font-size: 28px;
      color: #444;
      margin-bottom: 20px;
    }
    p {
      font-size: 20px;
      color: #333;
    }
    .hidden {
      display: none;
    }
    button {
      margin-top: 15px;
      padding: 12px 20px;
      border: none;
      border-radius: 10px;
      background: #f4978e;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #f08080;
    }
    select, input {
      margin-top: 15px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 80%;
      font-size: 18px;
    }
    /* Drag & drop */
    .drag-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }
    .draggable {
      padding: 15px;
      border-radius: 10px;
      background: #ffcad4;
      cursor: grab;
      font-size: 20px;
      user-select: none;
    }
    .drag-over {
      border: 2px dashed #f08080;
    }
    /* Nyan Cat animación */
    .nyan {
      position: fixed;
      top: 30%;
      left: -150px;
      font-size: 50px;
      animation: fly 5s linear forwards;
      z-index: 1000;
    }
    @keyframes fly {
      0% { left: -150px; top: 30%; }
      100% { left: 110%; top: 30%; }
    }
  </style>
</head>
<body>
  <div class="card">
    <!-- Pantalla inicial -->
    <div id="intro">
      <h1>Has sido invitada a completar esta encuesta</h1>
      <p>Si logras responder bien... recibirás un mensaje secreto.</p>
      <button onclick="startSurvey()">Empezar</button>
    </div>

    <!-- Pregunta 1 -->
    <div id="step1" class="hidden">
      <h2>Pregunta 1</h2>
      <p>¿Cómo te llamas?</p>
      <select id="name">
        <option value="">--Selecciona--</option>
        <option value="Noor">Noor</option>
        <option value="Caca">Caca</option>
      </select>
      <br>
      <button onclick="checkStep1()">Siguiente</button>
    </div>

    <!-- Pregunta 2 -->
    <div id="step2" class="hidden">
      <h2>Pregunta 2</h2>
      <p>¿Cuál es mi color favorito?</p>
      <input type="text" id="color" placeholder="Escribe aquí...">
      <br>
      <button onclick="checkStep2()">Siguiente</button>
    </div>

    <!-- Pregunta 3 -->
    <div id="step3" class="hidden">
      <h2>Pregunta 3</h2>
      <p>Ordena de más importante a menos importante:</p>
      <div id="dragContainer" class="drag-container">
        <div class="draggable" draggable="true">Chigiri</div>
        <div class="draggable" draggable="true">El libro del pez</div>
        <div class="draggable" draggable="true">Leon</div>
      </div>
      <button onclick="checkStep3()">Finalizar</button>
    </div>

    <!-- Mensaje final -->
    <div id="final" class="hidden">
      <h2>Mensaje para ti</h2>
      <p style="text-align: left; font-size: 18px; line-height: 1.6;">
        Noor, hay algo que llevo tiempo queriendo decirte y hoy me animé a hacerlo. 
        A veces uno se guarda cosas por miedo a sonar cursi jeje o porque no encuentra las palabras correctas, 
        pero contigo siento que lo más honesto es simplemente hablar desde lo que siento AUNQUE sea rara vez..ok<br><br>

        Quiero que sepas que te quiero mucho, y no lo digo a la ligera., para mí tu amistad significa más de lo que imaginas. 
        Estar contigo, hablar contigo y compartir cualquier momento, por pequeño que sea, siempre logra hacer que mi día cambie 
        para mejor..aunque no siempre pero bueno ig, no todos son perfectos como yo y no todas las personas logran dejar esa huella tan especial, 
        pero tú sí.<br><br>

        Aprecio demasiado lo que tenemos, y creo que pocas veces en la vida se encuentra a alguien con quien uno se sienta tan en paz 
        y al mismo tiempo tan emocionado de compartir el presente aunque estes muy lejos. Hay algo en ti que hace que las cosas se sientan distintas, 
        y a veces pienso que tengo mucha suerte de haberte conocido y solo queria mencionarlo, PLS ESPERO QUE ESTA COSA FUNCIONE, 
        recien estoy aprendiendo a codificar asi que perdona mis errores..
      </p>
    </div>
  </div>

  <script>
    let wrongCount = 0;
    let orderFails = 0;

    function startSurvey() {
      document.getElementById("intro").classList.add("hidden");
      document.getElementById("step1").classList.remove("hidden");
    }

    function showError() {
      wrongCount++;
      if (wrongCount === 1) {
        alert("OYE se supone que debes de saber, caca");
      } else if (wrongCount === 2) {
        alert("wow no me conoces, que traicion");
      } else {
        alert("ya mejor ponte a estudiar mi vida porque wow...");
      }
    }

    function checkStep1() {
      let name = document.getElementById("name").value;
      if (name === "Noor" || name === "Caca") {
        if (name === "Noor") {
          alert("oh..esperaba que eligieras caca");
        } else if (name === "Caca") {
          alert("JEJE aceptas que eres caca verdosa");
        }
        document.getElementById("step1").classList.add("hidden");
        document.getElementById("step2").classList.remove("hidden");
        wrongCount = 0;
      } else {
        showError();
      }
    }

    function checkStep2() {
      let color = document.getElementById("color").value.toLowerCase().trim();
      if (color.includes("azul") || color === "negro") {
        document.getElementById("step2").classList.add("hidden");
        document.getElementById("step3").classList.remove("hidden");
        wrongCount = 0;
      } else {
        showError();
      }
    }

    // Drag & drop
    const draggables = document.querySelectorAll(".draggable");
    const container = document.getElementById("dragContainer");

    draggables.forEach(draggable => {
      draggable.addEventListener("dragstart", () => {
        draggable.classList.add("dragging");
      });
      draggable.addEventListener("dragend", () => {
        draggable.classList.remove("dragging");
      });
    });

    container.addEventListener("dragover", e => {
      e.preventDefault();
      const afterElement = getDragAfterElement(container, e.clientY);
      const dragging = document.querySelector(".dragging");
      if (afterElement == null) {
        container.appendChild(dragging);
      } else {
        container.insertBefore(dragging, afterElement);
      }
    });

    function getDragAfterElement(container, y) {
      const draggableElements = [...container.querySelectorAll(".draggable:not(.dragging)")];
      return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    function checkStep3() {
      const order = [...container.querySelectorAll(".draggable")].map(d => d.innerText.toLowerCase());
      if (order[0].includes("chigiri") && order[1].includes("libro") && order[2].includes("leon")) {
        document.getElementById("step3").classList.add("hidden");
        document.getElementById("final").classList.remove("hidden");
        launchNyanCat();
      } else {
        orderFails++;
        if (orderFails >= 3) {
          alert("no sabes nada de mi..ok ig");
          document.getElementById("step3").classList.add("hidden");
          document.getElementById("final").classList.remove("hidden");
          launchNyanCat();
        } else {
          showError();
        }
      }
    }

    // Animación estilo Nyan Cat
    function launchNyanCat() {
      for (let i = 0; i < 10; i++) {
        const nyan = document.createElement("div");
        nyan.classList.add("nyan");
        nyan.innerText = "🌈🐱"; // Nyan Cat estilo simple
        nyan.style.top = `${Math.random() * 50 + 20}%`;
        nyan.style.animationDuration = `${Math.random() * 3 + 4}s`;
        document.body.appendChild(nyan);
        setTimeout(() => nyan.remove(), 5000);
      }
    }
  </script>
</body>
</html>
